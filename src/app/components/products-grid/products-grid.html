<section class="bg-[#faf7f2] py-20 relative" >
  <div class="max-w-6xl mx-auto px-6">

    <!-- HEADER -->
    <p class="text-[24px] text-gray-900 mb-2">Our Collection</p>
    <h2 class="text-[45px] font-medium text-gray-900 mb-2">
      Handcrafted Bowls
    </h2>
    <p class="text-gray-900 mb-12 font-medium">
      Each Piece Tells Its Own Story
    </p>
    <!-- LEFT BUTTON --> <button (click)="scrollLeft()" class="absolute left-6 top-[55%] opacity-55 w-9 h-9 bg-white rounded-full shadow flex items-center justify-center z-20 font-medium text-3xl"> ‹ </button> <!-- RIGHT BUTTON --> <button (click)="scrollRight()" class="absolute right-6 top-[55%] opacity-55 w-9 h-9 bg-white rounded-full shadow flex items-center justify-center z-20 font-medium text-3xl"> › </button>

    <!-- SCROLL CONTAINER -->
    <div
      #scrollContainer
      class="flex gap-6 overflow-x-auto scroll-smooth no-scrollbar pb-6"
    >

      <!-- PRODUCT CARD -->
      <div
        *ngFor="let product of products"
        class="min-w-[300px]
               bg-[#fbf8f3]
               rounded-[28px]
               border border-[#e6e1db]
               overflow-hidden
               relative
               transition hover:shadow-md"
      >

        <!-- BADGE -->
        <span
          class="absolute top-4 left-4 text-white text-xs px-4 py-1.5 rounded-full"
          [ngClass]="product.isBestseller ? 'bg-black' : 'bg-[#BE725A]'"
        >
          Bestseller
        </span>

        <!-- HEART -->
        <button
          (click)="toggleLike(product)"
          class="absolute top-4 right-4
                 w-8 h-8 rounded-full bg-white
                 flex items-center justify-center
                 hover:scale-110 transition"
        >
          <svg
            *ngIf="!product.liked"
            xmlns="http://www.w3.org/2000/svg"
            fill="none"
            viewBox="0 0 24 24"
            stroke-width="1.8"
            stroke="#ef4444"
            class="w-5 h-5"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              d="M21 8.25c0-2.485-2.099-4.5-4.688-4.5
                 -1.935 0-3.597 1.126-4.312 2.733
                 -.715-1.607-2.377-2.733-4.313-2.733
                 C5.1 3.75 3 5.765 3 8.25
                 c0 7.22 9 12 9 12s9-4.78 9-12z"
            />
          </svg>

          <svg
            *ngIf="product.liked"
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 24 24"
            fill="#ef4444"
            class="w-5 h-5"
          >
            <path
              d="M12 21s-8.5-4.6-8.5-11
                 C3.5 6.5 5.6 4.5 8.1 4.5
                 c1.7 0 3.2 1 3.9 2.4
                 .7-1.4 2.2-2.4 3.9-2.4
                 2.5 0 4.6 2 4.6 4.5
                 0 6.4-8.5 11-8.5 11z"
            />
          </svg>
        </button>

        <!-- IMAGE -->
        <div class="w-full h-[210px] bg-[#efe8e1]">
          <img
            [src]="product.image"
            [alt]="product.name"
            class="w-full h-full object-cover"
          />
        </div>

        <!-- CONTENT -->
        <div class="p-5">
          <h3 class="text-[20px] font-medium text-black mb-1">
            {{ product.name }}
          </h3>

          <div class="flex items-center gap-2 mb-2">
            <span class="text-black text-[20px]">★★★★★</span>
            <span class="font-medium">5.0</span>
          </div>

          <p class="text-gray-500 text-sm mb-5">
            Handcrafted terracotta with a natural textured finish
          </p>

          <div class="flex items-center justify-between">
            <span class="text-[#BE725A] font-bold text-lg">
              {{ product.price }} MAD
            </span>

            <button
              (click)="buy(product)"
              class="bg-[#BE725A] text-white px-7 py-3 rounded-full
                     text-sm font-medium hover:opacity-90 transition"
            >
              Buy Now
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- ================= MODAL ================= -->

<!-- OVERLAY -->
<div
  *ngIf="showCheckout"
  class="fixed inset-0 bg-black/40 z-50"
  (click)="closeCheckout()"
></div>

<!-- MODAL CARD -->
<div
  *ngIf="showCheckout"
  class="fixed z-50 top-1/2 left-1/2
         -translate-x-1/2 -translate-y-1/2
         bg-white w-[420px]
         rounded-3xl p-6 shadow-xl"
>

  <div class="flex justify-between items-center mb-4">
    <h3 class="text-xl font-semibold">Buyer Information</h3>
    <button (click)="closeCheckout()" class="text-xl text-gray-400">✕</button>
  </div>

  <p class="text-sm text-gray-500 mb-4">
    Product:
    <span class="font-medium text-black">
      {{ selectedProduct?.name }}
    </span>
  </p>

  <form class="space-y-4">
    <input type="text" placeholder="Full Name" class="input" />
    <input type="email" placeholder="Email Address" class="input" />
    <input type="tel" placeholder="Phone Number" class="input" />
    <textarea rows="3" placeholder="Delivery Address" class="input"></textarea>

    <button
      type="button"
      (click)="confirmOrder()"
      class="w-full bg-[#BE725A] text-white py-3 rounded-full font-medium"
    >
      Confirm Order
    </button>
  </form>
</div>
